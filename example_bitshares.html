<script src="dist/beet-js.js"></script>
<script>
beet.init('My App').then(identities => {
    try {
        console.log(identities);
        if (identities.length == 0) {
            beet.connect().then(res => {
                beet.link('BTS').then(res => {
                    console.log("link", beet.getAccount());

                    // comment this back in to debug id mismatch

                    // beet.voteFor({id: '1.14.159'}).then(account => {
                    //     console.log("voteFor", account);
                    // }).catch((err) => {
                    //     console.error("voteFor", err);
                    // });
                }).catch((err) => {
                    console.error(err);
                });
            }).catch((err) => {
                console.error(err);
            });
        } else {
            beet.connect(identities[0]).then(res => {
                console.log("connected", res);
                beet.voteFor({id: '1.14.159'}).then(account => {
                    console.log("voteFor", account);
                }).catch((err) => {
                    console.error("voteFor", err);
                });
            }).catch((err) => {
                console.error(err);
            });
        }
    } catch (err) {
        console.error(err);
    }
}).catch((err) => {
    console.error(err);
});
</script>