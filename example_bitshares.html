<script src="dist/beet-js.js"></script>
<script src="bitsharesjs.js"></script>
<script>
beet.get("My App", "BTS").then( async app => {
    console.log(app.BTS);
    TransactionBuilder = app.BTS.inject(bitshares_js.TransactionBuilder);
    bitshares_js.bitshares_ws.Apis.instance(
        "wss://eu.nodes.bitshares.ws",
        true,
        10000,
        {enableCrypto: false, enableOrders: false},
        (err) => console.log(err)
    ).init_promise.then(() => {
        try {
            let  tr = new TransactionBuilder();
            let transfer_op = tr.get_type_operation("transfer", {
                fee: {
                    amount: 0,
                    asset_id: "1.3.0"
                },
                from: "1.2.886902",
                to: "1.2.894879",
                amount: {amount: 100, asset_id: "1.3.0"},
                memo: undefined
            });
            console.log(transfer_op);
            tr.add_operation(
                transfer_op
            );
            Promise.all([
                tr.set_required_fees(),
                tr.update_head_block()
            ]).then(() => {
                tr.add_signer("inject_wif", "BTS5ur776qN4bWBUaRarFcaUcjQr7qAEzCCeoCVTZPuZqaGJEUjTc");
                tr.broadcast();
            }).catch((err) => {
                console.error(err);
            });;
        } catch (err) {
            console.error(err);
        }
    }).catch((err) => {
        console.log(err);
    });
}).catch(err => {
    console.error(err);
});
</script>